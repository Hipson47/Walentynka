---
description: High-performance motion and UI quality standards for the Valentine project
globs: "src/**/*.{ts,tsx,css}"
alwaysApply: false
---

# Motion & UI Quality Baseline

Enforcing high-quality interfaces and smooth animations while avoiding common AI-generated "slop".

## UI & Layout Standards

- **Modern CSS**: Use vanilla CSS (in `src/styles/`). DO NOT use Tailwind.
- **Viewport Units**: Use `dvh` (dynamic viewport height) instead of `vh` to avoid mobile browser chrome issues.
- **Typography**: Use `text-wrap: balance` for headings and `text-wrap: pretty` for body text.
- **Safe Areas**: Respect `safe-area-inset` for fixed elements on mobile devices.

## Animation Performance (CRITICAL)

- **Compositor Only**: Animate only `transform` and `opacity` by default. Avoid animating layout properties (`width`, `height`, `top`, `left`) as they trigger reflows.
- **rAF Management**: 
  - ALWAYS provide a stop condition for `requestAnimationFrame` loops.
  - ALWAYS cancel rAF IDs in component cleanup.
- **Measurement**: Batch DOM reads (e.g., `getBoundingClientRect`) before writes to avoid layout thrashing.
- **Reduced Motion**: Respect `prefers-reduced-motion` by disabling non-essential animations or providing simplified fallbacks.

## Interaction Design

- **Feedback**: Interaction feedback (e.g., button clicks) should occur within 200ms.
- **Overlays**: Keep decorative fullscreen overlays non-interactive (`pointer-events: none`) unless they contain UI elements.
- **Constraints**: 
  - Never animate large `blur()` or `backdrop-filter` surfaces continuously.
  - Limit particle counts and spawn rates in effects to maintain 60fps.
