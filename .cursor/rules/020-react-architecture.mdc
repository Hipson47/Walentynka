---
description: Comprehensive React 19, TypeScript 5, and Vite 6 patterns for modern frontend development
globs: "src/**/*.{ts,tsx}"
alwaysApply: false
---

# React & TypeScript Best Practices (2026)

Modern React patterns optimized for performance, type safety, and maintainability.

## Core Principles

- **React 19 Ready**: Use `use` hook for resources, `ref` as a prop, and modern action patterns.
- **Strict TypeScript**: No `any`, use `satisfies` for object literals, and prefer discriminated unions for state.
- **Vite 6 Optimization**: Leverage fast refresh and optimized build pipelines.

## Component Architecture

- **Composition over Inheritance**: Use children and render props to keep components flexible.
- **Logic Separation**: Keep business logic in custom hooks (`src/hooks/`) and UI in components.
- **State Management**: 
  - Use `useReducer` for complex state logic (canonical flow in `src/app/state.ts`).
  - Use `useOptimistic` for immediate UI feedback where applicable.
  - Avoid prop drilling; use Context sparingly for global theme/auth only.

## Performance & Motion

- **Animation Safety**: Prefer `transform` and `opacity`. Use `requestAnimationFrame` responsibly.
- **Cleanup**: ALWAYS cancel rAF, clear timeouts, and remove event listeners in `useEffect` cleanup.
- **Reduced Motion**: Respect `prefers-reduced-motion` using the `usePrefersReducedMotion` hook.
- **Stable References**: Use `useCallback` and `useMemo` only when profiling shows they are necessary to prevent expensive re-renders.

## Anti-Patterns to Avoid

- ❌ Do not use `useEffect` for data transformation or state synchronization.
- ❌ Do not put business logic directly in event handlers.
- ❌ Do not use index as `key` for dynamic lists.
- ❌ Do not mix screen orchestration with low-level effect implementations.
